<div ng-controller="user_register" ng-init="auth()" ng-cloak>

  <div ng-include="'pages/inc/header.html'" class="common-header"></div>

  <div class="container my-account-page">
    <div ng-include="'pages/user/inc/account-panel.html'" class="left-panel"></div>

    <div class="right-panel add-address w-shadow">
      <h4 class="page-name">Update your Address</h4>


      <ul class="table-view">
        <form name="myForm" >
                <!--<ul>
  <li ng-repeat="(key, errors) in myForm.$error track by $index"> <strong>{{ key }}</strong> errors
    <ul>
      <li ng-repeat="e in errors">{{ e.$name }} has an error: <strong>{{ key }}</strong>.</li>
    </ul>
  </li>
</ul>-->
          <li class="list field-fillup">
            <span class="input-field-title">Name</span>
            <div class="input-div error-check"><input name="addrname" id="addrname" class="input-box" placeholder="Name on Address" type="text" ng-model="user_address_detail.address_name"
               ng-maxlength="200" >

         
            </div>
          </li>
          <li class="list field-fillup">
            <span class="input-field-title">Street Address</span>
            <div class="input-div"><input name="streetaddr" class="input-box" id="streetaddr" placeholder="Flat/House No. Colony/Street No." type="text" ng-model="user_address_detail.address_details" ng-maxlength="30" >
            
                
             
            </div>

          </li>
          <li class="list field-fillup">
            <span class="input-field-title">Locality / Landmark</span>
            <div class="input-div"><input name="landmark" id="autocomplete_addr" class="input-box" placeholder="Your Near Location/Landmark" type="text"
                ng-model="user_address_detail.address_locality" ng-blur="autocomplete_addr_in_user_panel()" >
                
                  </div>

</li>
<li class="list field-fillup">
  <span class="input-field-title">City</span>
  <div class="input-div"><input name="city" class="input-box" placeholder="City" id="addrcity" type="text" ng-model="user_address_detail.address_city" >

    
  </div>
</li>
<li class="list field-fillup">
  <span class="input-field-title">State</span>
  <div class="input-div">
    <input name="" class="input-box" placeholder="Enter State" type="text" id="addrstate" ng-model="user_address_detail.address_state" >
    <!--<select class="select-option" ng-model="user_address_detail.address_state">
          <option value="">Select</option>
          <option value="New Delhi">New Delhi</option>
          <option value="Delhi/Ncr">Delhi/Ncr</option>
        </select>-->
  </div>
</li>
<li class="list field-fillup">
  <span class="input-field-title">Pincode</span>
  <div class="input-div"><input name="pincode" class="input-box" id="addrpincode" placeholder="Enter 6 Digit Pincode" type="text" ng-model="user_address_detail.address_pincode" ng-minlength="6" ng-maxlength="6" >
    
  </div>
</li>
<li class="list field-fillup">
  <span class="input-field-title">Mobile Number </span>
  <div class="input-div"><input name="mobile" id="contact_no" class="input-box" placeholder="10 Digit Mobile Number" type="text" ng-model="user_address_detail.address_contact" ng-minlength="10" ng-maxlength="10"    >
  
 
  </div>
</li>
<li class="list field-fillup">
  <span class="input-field-title">Address Type</span>
  <div class="input-div">
    <input id="check1" name="addr_type"  value="Home" class="fancy-radio" type="radio" ng-model="user_address_detail.address_type"  >
    <label for="check1" class="fancy-radio-label">Home</label>
 
    <input id="check2" name="addr_type"  value="Office/Commercial" class="fancy-radio" type="radio" ng-model="user_address_detail.address_type"  >
    <label for="check2" class="fancy-radio-label"> Office/Commercial </label>
   
  </div>
</li>
<li class="list field-fillup">
  <span class="input-field-title">Make it default</span>
  <div class="input-div">
    <input id="check3" name="check" value="yes" class="fancy-checkbox" type="checkbox" ng-model="user_address_detail.address_default">
    <label for="check3" class="fancy-checkbox-label">Make this my default address</label>
  </div>
</li>
<li class="list field-fillup">
  <div class="input-div"><input name="" id="sbmt_btn" class="submit-btn" value="Save" type="submit"  ng-click="update_user_address(user_address_detail)"></div>
</li>

</form>
</ul>


<ul class="address-list" ng-init="getUserAddress()">

  <div ng-repeat="address in user_address_list">
    <div ng-if="address.address_default=='true'">
      <li class="list">
        <div class="location default">{{address.address_type}} - Default</div>
        <h6 class="name">{{address.address_name}}</h6>
        <span class="add-line">{{address.address_details}}</span>
        <span class="add-line">{{address.address_city}}-{{address.address_pincode}}</span>
        <span class="add-line">{{address.address_state}}</span>
        <span class="add-line">{{address.address_locality}}</span>
        <span class="Phone"><i class="fa fa-phone"></i>(+91) {{address.address_contact}}</span>

        <ul class="floating-buttons">
          <!-- <li class="button-list"><a href="#0" class="link"><i class="fa fa-pencil"></i></a></li> -->
          <li class="button-list">
            <div class="link" ng-click="edit_address_user_panel(address.address_id)" style="cursor: pointer;margin-right: 8px;"> <i class="fa fa-edit"></i></div>
              <div class="link" ng-click="delete_address(address.address_id)" style="cursor: pointer"> <i class="fa fa-trash"></i></div>
</li>
</ul>
</li>
</div>

<div ng-if="address.address_default=='false'">
  <li class="list">
    <div class="location">{{address.address_type}} </div>

    <h6 class="name">{{address.address_name}}</h6>
    <span class="add-line">{{address.address_details}}</span>
    <span class="add-line">{{address.address_city}}-{{address.address_pincode}}</span>
    <span class="add-line">{{address.address_state}}</span>
    <span class="add-line">{{address.address_locality}}</span>
    <span class="Phone"><i class="fa fa-phone"></i>(+91) {{address.address_contact}}</span>
    <ul class="floating-buttons">
      <!-- <li class="button-list"><a href="#0" class="link"><i class="fa fa-pencil"></i></a></li> -->
      <li class="button-list">
         <div class="link" ng-click="edit_address_user_panel(address.address_id)" style="cursor: pointer;margin-right: 8px;"> <i class="fa fa-edit"></i></div>
        <div class="link" ng-click="delete_address(address.address_id)" style="cursor: pointer"> <i class="fa fa-trash"></i></div>
</li>
</ul>
</li>
</div>

</div>

</ul>



</div>

</div>
<div ng-include="'pages/inc/footer.html'"></div>

</div>

<script>

  // $.cookie("eatoeato.loc", null, { path: '/' });
  // $.cookie("formatted_addr", null, { path: '/' });
  var options = {
    types: ['(cities)'],

  };

  var input = document.getElementById('autocomplete_addr');

  var autocomplete = new google.maps.places.Autocomplete(input);
  google.maps.event.addListener(autocomplete, 'place_changed', function () {
    fillInAddress();
  });

  function fillInAddress() {
    /* Get the place details from the Autocomplete object. */
    /* The Autocomplete.getPlace() call retrieves a PlaceResult object */

    var place = autocomplete.getPlace();
    //console.log(place);
    // $.cookie('eatoeato.loc', place.address_components[0].long_name);
    $.cookie('formatted_addr', place.formatted_address);
    //console.log(place);
    $('.location_btn').click();

  }


</script>